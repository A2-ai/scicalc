<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculates hepatic function categories based on NCI-ODWG criteria — hfc • scicalc</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calculates hepatic function categories based on NCI-ODWG criteria — hfc"><meta name="description" content="This function categorizes hepatic function impairment using the National Cancer Institute
Organ Dysfunction Working Group (NCI-ODWG) criteria. It evaluates aspartate aminotransferase
(AST) and bilirubin levels relative to their upper limits of normal to determine hepatic
impairment severity. The function handles edge cases where bilirubin values are very close
to category boundaries using floating-point tolerant comparisons."><meta property="og:description" content="This function categorizes hepatic function impairment using the National Cancer Institute
Organ Dysfunction Working Group (NCI-ODWG) criteria. It evaluates aspartate aminotransferase
(AST) and bilirubin levels relative to their upper limits of normal to determine hepatic
impairment severity. The function handles edge cases where bilirubin values are very close
to category boundaries using floating-point tolerant comparisons."><meta property="og:image" content="https://a2-ai.github.io/scicalc/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scicalc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/scicalc.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/A2-ai/scicalc"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculates hepatic function categories based on NCI-ODWG criteria</h1>

      <div class="d-none name"><code>hfc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function categorizes hepatic function impairment using the National Cancer Institute
Organ Dysfunction Working Group (NCI-ODWG) criteria. It evaluates aspartate aminotransferase
(AST) and bilirubin levels relative to their upper limits of normal to determine hepatic
impairment severity. The function handles edge cases where bilirubin values are very close
to category boundaries using floating-point tolerant comparisons.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hfc</span><span class="op">(</span><span class="va">ast</span>, <span class="va">ulnast</span>, <span class="va">bili</span>, <span class="va">ulnbili</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ast">ast<a class="anchor" aria-label="anchor" href="#arg-ast"></a></dt>
<dd><p>Numeric vector of aspartate aminotransferase concentrations (IU/L)</p></dd>


<dt id="arg-ulnast">ulnast<a class="anchor" aria-label="anchor" href="#arg-ulnast"></a></dt>
<dd><p>Numeric vector of upper limit of normal AST values (IU/L).
Typically 33 IU/L for most laboratories</p></dd>


<dt id="arg-bili">bili<a class="anchor" aria-label="anchor" href="#arg-bili"></a></dt>
<dd><p>Numeric vector of total bilirubin concentrations (mg/dL)</p></dd>


<dt id="arg-ulnbili">ulnbili<a class="anchor" aria-label="anchor" href="#arg-ulnbili"></a></dt>
<dd><p>Numeric vector of upper limit of normal bilirubin values (mg/dL).
Typically 1.2 mg/dL for most laboratories</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Integer vector of hepatic function categories (1-4). Returns <code>-999</code>
for missing values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>The NCI-ODWG hepatic function categories are defined as</strong>:</p><ul><li><p>1: Normal: AST ≤ ULN AND bilirubin ≤ ULN</p></li>
<li><p>2: Mild impairment: AST &gt; ULN OR bilirubin &gt; ULN but ≤ 1.5 × ULN</p></li>
<li><p>3: Moderate impairment: Bilirubin &gt; 1.5 × ULN but ≤ 3 × ULN</p></li>
<li><p>4: Severe impairment: Bilirubin &gt; 3 × ULN</p></li>
</ul><p><strong>Special handling:</strong>
The function uses <code><a href="https://dplyr.tidyverse.org/reference/near.html" class="external-link">dplyr::near()</a></code> for boundary comparisons when bilirubin
values are very close to 1.5 × ULN or 3 × ULN to handle floating-point precision
issues that can occur with calculated thresholds.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>National Cancer Institute Organ Dysfunction Working Group criteria for hepatic impairment</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Single patient with normal hepatic function</span></span></span>
<span class="r-in"><span><span class="fu">hfc</span><span class="op">(</span>ast <span class="op">=</span> <span class="fl">15</span>, ulnast <span class="op">=</span> <span class="fl">33</span>, bili <span class="op">=</span> <span class="fl">0.6</span>, ulnbili <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple patients with different impairment levels</span></span></span>
<span class="r-in"><span><span class="fu">hfc</span><span class="op">(</span>ast <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">45</span>, <span class="fl">30</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     ulnast <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">33</span>, <span class="fl">33</span>, <span class="fl">33</span>, <span class="fl">33</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     bili <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.0</span>, <span class="fl">2.5</span>, <span class="fl">4.0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>     ulnbili <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Edge case: bilirubin exactly at boundary</span></span></span>
<span class="r-in"><span><span class="fu">hfc</span><span class="op">(</span>ast <span class="op">=</span> <span class="fl">25</span>, ulnast <span class="op">=</span> <span class="fl">33</span>, bili <span class="op">=</span> <span class="fl">1.8</span>, ulnbili <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>  <span class="co"># 1.8 = 1.5 * 1.2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pipeline example with realistic data</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">patients</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,</span></span>
<span class="r-in"><span>  AST <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">45</span>, <span class="fl">28</span>, <span class="fl">35</span>, <span class="fl">22</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ULNAST <span class="op">=</span> <span class="fl">33</span>,</span></span>
<span class="r-in"><span>  BILI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.0</span>, <span class="fl">2.2</span>, <span class="fl">4.5</span>, <span class="fl">1.8</span>, <span class="fl">0.9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ULNBILI <span class="op">=</span> <span class="fl">1.2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">patients</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BHFC <span class="op">=</span> <span class="fu">hfc</span><span class="op">(</span><span class="va">AST</span>, <span class="va">ULNAST</span>, <span class="va">BILI</span>, <span class="va">ULNBILI</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID AST ULNAST BILI ULNBILI BHFC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  15     33  0.8     1.2 -999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  45     33  1.0     1.2    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  28     33  2.2     1.2 -999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  4  35     33  4.5     1.2    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  5  22     33  1.8     1.2    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  6  30     33  0.9     1.2 -999</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Smith, Jenna Johnson, Devin Pastoor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

